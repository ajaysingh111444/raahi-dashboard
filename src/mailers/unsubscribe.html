
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>body{background:#fff;width:100%;height:100vh;background-size:cover;background-position:center center;margin:0;padding:0;display:flex;align-items:center;justify-content:center;position:relative}
	.subscribebox{background:#fff;padding:30px;border-radius:25px;width:640px; text-align:center; position:absolute}.form-control:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}
	.form-control{display:block;width:65%;height:45px; margin: 0 auto; padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:2px solid #ced4da; padding-left:25px; border-radius:.25rem;transition:border-color .15s ease-in-out , box-shadow .15s ease-in-out}*,::after,::before{box-sizing:border-box}
	.heading{width:100%; margin-top:25px;  margin-bottom:20px;  text-align:center;font-family:Arial,Helvetica,sans-serif;font-size:33px;font-weight:600;color:#343434}
	.submitbtn{padding:13px 40px;border-radius:25px;color:#fff;margin-top:25px;background:#820b5c;font-size:21px;box-shadow:none;outline:none;border:none}.text-center{text-align:center}@media (min-width:0px) and (max-width:481.99px){.subscribebox{background:#fff;padding:15px;width:100%}}
	.sub-heading{text-align:center; text-transform:lowercase;font-weight:600; margin-top:7px; margin-bottom:30px; color:#343434;}
	.img-responsive{max-width:100%; margin:0 auto;}
	.unsubscribing-color{color:#820b5c;}
	</style>

</head>
<body>
    <div class="subscribebox">
	<img src="unsubscribe2.png" class="img-responsive"/>
       <div class="heading">
            Are you sure about <span class="unsubscribing-color">unsubscribing?</span>
        </div>
		<!-- <h2 class="sub-heading">if you unsubscribe now,you might miss</h2> -->
        <form id="formElem">
            <div class="form-group">
              <input type="email" id="email" required class="form-control" placeholder="Enter your email id">
            </div>
            <div class="form-group text-center">
                <button type="submit" class="submitbtn">
                    Unsubscribe
                </button>
            </div>
        </form>
    </div>
     <script>
       formElem.onsubmit = async(e) => {
    alert("Are You Sure To Unsubscribe?")
    e.preventDefault();
    var email = document.getElementById("email").value;
    console.log(email);
     const myDelete = {
        email: email,
    };

    fetch('https://web.raahi.org/api/newsletter/unSubscribe?email=' + email, {
        method: 'DELETE',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(myDelete)
    }).then((res) => {
             let json = res.json(); 
            if (res.ok) {
               // return res.json()
               return json;
            } else {
               // return Promise.reject({ status: res.status, message: res.message });
             return json.then(Promise.reject.bind(Promise));
            } 
            
        })
        .then((data) =>{
         console.log(data);
         window.open('https://web.raahi.org/mailers/unsubscirbe-successful.html');
        })
        .catch(err => {
           // console.log(err);
           alert(err.message)
        });

 }; 
    </script>
</body>
</html>